{% load static %}
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ClimateApp ‚Äî Live Weather</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="{% static 'climate_data/style.css' %}">
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
</head>
<body>

  <!-- NAVBAR -->
  <div class="glass-nav container d-flex align-items-center justify-content-between">
    <div class="d-flex align-items-center">
      <span class="logo-anim" aria-hidden="true"></span>
      <div class="brand-text ms-2">CLIMATE<span class="text-accent">App</span></div>
    </div>

    <form class="d-flex mx-auto" action="" method="get" style="width:50%; justify-content:center;">
      <input name="city" type="search" class="search-box form-control" placeholder="Search city..." value="{{ city }}">
    </form>
  </div>

  <!-- MAIN -->
  <main class="main-wrap container">
    <div class="row gy-4">
      <div class="col-lg-6">
        <div class="glass p-4">
          <div class="d-flex justify-content-between align-items-start">
            <div>
              <h2 class="mb-1">{{ city }}, {{ country }}</h2>
              <div class="mt-2">
                <div class="h1 mb-0">{{ temp }}¬∞C</div>
                <div class="text-muted">{{ desc }}</div>
              </div>
            </div>

            <div class="text-center">
              <img src="https://openweathermap.org/img/wn/{{ icon }}@2x.png" alt="icon" class="weather-icon">
            </div>
          </div>

          <hr>
          <div class="row">
            <div class="col-6">
              <p>Humidity: <strong>{{ humidity }}%</strong></p>
              <p>Wind Speed: <strong>{{ wind }} m/s</strong></p>
            </div>
            <div class="col-6">
              <p>Sunrise: <strong>{{ sunrise }}</strong></p>
              <p>Sunset: <strong>{{ sunset }}</strong></p>
            </div>
          </div>
        </div>

        <div class="glass p-3 mt-4 text-center">
          <h6>Map Preview</h6>
          <div id="map" style="height:350px; border-radius:10px;"></div>
        </div>
      </div>
    </div>
  </main>

  <div class="glass-footer">
    <div>¬© 2025 ClimateApp ‚Äî Live weather worldwide üåç</div>
  </div>

  <script>
    const lat = {{ lat|default:"24.8607" }};
    const lon = {{ lon|default:"67.0011" }};
    var map = L.map('map').setView([lat, lon], 8);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
      attribution: '&copy; OpenStreetMap'
    }).addTo(map);
    L.marker([lat, lon]).addTo(map).bindPopup("{{ city }}").openPopup();
  </script>
</body>
</html>
